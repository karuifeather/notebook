@use './components/notes/styles/notebook-doc.scss';
@use './components/notes/styles/focus-mode.scss';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design tokens — calm accent, small indicators only. No big accent fills in sidebar/nav.
   Accent: #8AB4F8 — 3px indicators, focus ring, icon highlight only. */
:root {
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.06);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.1);
  --transition-fast: 150ms ease;
  --transition-base: 200ms ease;
  /* Light theme — color system */
  --bg: #f5f5f5;
  --surface: #ffffff;
  --surface-2: #fafafa;
  --surface2: #fafafa;
  --border: #e5e5e5;
  --text: #171717;
  --muted: #525252; /* ~70–75% of text brightness, readable */
  --muted-2: #737373;
  --icon: color-mix(in oklab, var(--text) 72%, var(--surface));
  --icon-muted: color-mix(in oklab, var(--text) 52%, var(--surface));
  --icon-active: var(--text);
  --accent: #8ab4f8;
  --accent-hover: color-mix(in oklab, var(--accent) 85%, white);
  --accent-soft: rgba(138, 180, 248, 0.14);
  --accent-ring: rgba(138, 180, 248, 0.35);
  --danger: #dc2626;
  --success: #16a34a;
  --focus-ring: 0 0 0 2px var(--surface), 0 0 0 4px var(--accent-ring);
}

.dark,
html.dark {
  --bg: #0f0f0f;
  --surface: #1a1a1a;
  --surface-2: #242424;
  --surface2: #242424;
  --border: #2e2e2e;
  --text: #fafafa;
  --muted: #b8b8b8; /* ~70–75% of text brightness, readable */
  --muted-2: #909090;
  --icon: color-mix(in oklab, var(--text) 72%, var(--surface));
  --icon-muted: color-mix(in oklab, var(--text) 52%, var(--surface));
  --icon-active: var(--text);
  --accent: #8ab4f8;
  --accent-hover: color-mix(in oklab, var(--accent) 85%, white);
  --accent-soft: rgba(138, 180, 248, 0.14);
  --accent-ring: rgba(138, 180, 248, 0.35);
  --danger: #ef4444;
  --success: #22c55e;
  --focus-ring: 0 0 0 2px var(--surface), 0 0 0 4px var(--accent-ring);
}

/* Custom Reset & Overrides */
html {
  scroll-behavior: smooth;
}

body {
  background-color: var(--bg);
  color: var(--text);
  font-family: 'Inter', ui-sans-serif, system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a.link {
  color: var(--accent);
  transition: color var(--transition-fast);
}
a.link:hover {
  color: var(--accent-hover);
  text-decoration: underline;
}

button {
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-md);
  background: var(--accent);
  color: #fff;
  font-weight: 500;
  transition:
    background-color var(--transition-base),
    opacity var(--transition-fast);
}
button:hover {
  background: var(--accent-hover);
}

code {
  @apply font-mono text-sm bg-gray-200 px-1 py-0.5 rounded dark:bg-gray-800 dark:text-gray-100;
}

pre {
  @apply bg-gray-100 p-4 rounded shadow overflow-auto text-sm font-mono dark:bg-gray-800 dark:text-gray-100;
}

/* Focus rings for accessibility — accent-ring only, no bright blue */
.focus-ring:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

/* General Scrollbar Styles */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
  border-radius: var(--radius-sm);
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: var(--radius-sm);
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: var(--muted);
}

/* Note page: details description compact height */
.note-details-panel__description textarea {
  max-height: 4.5rem;
  min-height: 2.5rem;
}

/* Sidebar: hover actions and tree animation */
.sidebar-folder-content {
  transition: max-height 180ms ease-out;
}
/* Sidebar: active item = simple 3px vertical bar (no curve) */
.sidebar-collapsed-active-accent {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 16px;
  border-radius: 0;
  background: var(--accent);
  pointer-events: none;
}

/* Legacy aliases for gradual migration */
:root,
.dark,
html.dark {
  --focus: var(--accent-ring);
}

/* Landing page: centered tight grid */
.landing-container {
  width: 100%;
  max-width: 72rem;
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
  @media (min-width: 640px) {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
  @media (min-width: 1024px) {
    padding-left: 2rem;
    padding-right: 2rem;
  }
}
.landing-container--narrow {
  max-width: 48rem;
}
